(this.webpackJsonptrackit=this.webpackJsonptrackit||[]).push([[0],{296:function(e,t,a){},364:function(e,t,a){},435:function(e,t,a){e.exports=a.p+"static/media/Trackit_logo.c21465db.png"},455:function(e,t,a){e.exports=a(630)},630:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a.n(c),i=(a(364),a(50)),l=a.n(i),u=a(84),s=a(13),d=a(132),m=a(309),g=a(2),p=a(380),f=a(23),b=a(89),h=a(675),E=a(674),O=a(397),v=a(640),j=a(676),y=a(303),w=a(436),x=a.n(w),S=a(437),C=a.n(S),k=a(438),I=a.n(k),D=a(441),F=a.n(D),P=a(442),A=a.n(P),R=a(439),$=a.n(R),N=a(440),L=a.n(N),B=a(157),T=a.n(B),W=a(119),Y=a.n(W),U=a(677),H=a(639),z=a(396),M=a(41),V=a(26),q=Object(n.createContext)(null),Q=a(159),G=a(656),J=a(120),_=(a(136),a(117));function Z(){var e=Object(n.useState)({}),t=Object(s.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){c({labels:["Electronics","Food","Chairs","Clothing","Lifestyle","Cars","Houses","Watches","Tables","Gaming"],datasets:[{label:"Amazon",backgroundColor:["#159dfb","#c83955","#FFD166","#17d993","#9CFFFA","#2BD9FE","#623CEA","#DFB2F4","#D36135","#EF476F "],data:[3,2,2,3,5,7,3,4,2,5]}]})}),[]),r.a.createElement("div",null,r.a.createElement("h1",{align:"center"},"Categories"),r.a.createElement("div",{class:"canvas-container"},r.a.createElement(_.b,{data:a,options:{title:{text:"Product categories",display:!1}}})))}var K=a(381);Object(p.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),margin:"auto",maxWidth:500,background:"#27293d"},image:{width:128,height:128},img:{margin:"auto",display:"block",maxWidth:"100%",maxHeight:"100%"}}}));a(657),a(658),a(659),a(660),a(661),a(662);function X(){var e=Object(n.useState)({}),t=Object(s.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){c({labels:["Electronics","Food","Furniture","Clothing","Lifestyle","Cars"],datasets:[{label:"Amazon",backgroundColor:"rgb(255, 99, 132)",borderColor:"rgb(255, 99, 132)",data:[10,20,30,40,50,60,70,80,90,100]}]})}),[]),r.a.createElement("div",null,r.a.createElement("h1",{align:"center"},"Price drops this week"),r.a.createElement("div",{class:"canvas-container"},r.a.createElement(_.a,{data:a,options:{responsive:!0,title:{text:"Sony Wireless Headphones",display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0},gridLines:{display:!1}}],xAxes:[{gridLines:{display:!1}}]}}})))}a(296);function ee(e){var t=Object(p.a)((function(e){return{button:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginBottom:e.spacing(1),backgroundColor:"#3f51b5",color:"white","&:hover":{backgroundColor:"#32408f",color:"#FFF"}}}}))();return r.a.createElement(K.a,{variant:"contained",margin:"big",onClick:e.handleSubmit,fullWidth:e.fullWidth,className:t.button},e.text)}var te=Object(p.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(1),textAlign:"center",backgroundColor:"#212029"},title:{fontSize:60,color:"white",fontWeight:700},subtitle:{fontSize:28,color:"white",fontWeight:500}}}));var ae=function(){var e=Object(n.useContext)(q).userData,t=te();return r.a.createElement(r.a.Fragment,null,e.user?r.a.createElement(Q.a,{className:t.paper,style:{margin:30,padding:30}},r.a.createElement("div",{className:"background-darkblue"},r.a.createElement(G.a,{container:!0,spacing:3},r.a.createElement(G.a,{item:!0,xs:12},r.a.createElement("div",null,r.a.createElement("div",{className:"page"},e.user?r.a.createElement("div",{className:t.title},"Welcome ",e.user.displayName):null),r.a.createElement("div",{className:t.subtitle},"This week's summary"))),r.a.createElement(G.a,{item:!0,xs:6,style:{border:"1px solid gray"}},r.a.createElement(Q.a,{className:t.paper},r.a.createElement(Z,null))),r.a.createElement(G.a,{item:!0,xs:6,style:{border:"1px solid gray"}},r.a.createElement(Q.a,{className:t.paper},r.a.createElement(X,null)))))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{style:{textAlign:"center"}},"You are not logged in")))},ne=a(31);var re=function(e){return r.a.createElement("div",{className:"chart"},r.a.createElement(_.c,{data:e.chartData,options:{title:{display:!0,text:e.catValue,responsive:!0,fontColor:"#fff"},legend:{display:!0,position:"bottom"},Axes:{color:"#000"}}}))},ce=a(383),oe=a(680),ie=a(32),le=a(35);function ue(){var e=Object(ne.a)(["\n{\n    categories {\n        id\n        name\n        userID\n    }\n}"]);return ue=function(){return e},e}var se=Object(ie.a)(ue()),de=Object(p.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)}}}));function me(e){var t=[],a=Object(n.useState)(t[0]),c=Object(s.a)(a,2),o=c[0],i=c[1],l=(de(),Object(le.c)(se)),u=l.loading,d=l.error,m=l.data,g=Object(n.useState)(""),p=Object(s.a)(g,2),f=p[0],b=p[1],h=Object(n.useContext)(q).userData;return u?r.a.createElement("p",null,"Loading..."):d?r.a.createElement("p",null,"Error! :("):(m.categories.filter((function(e){return e.userID===h.user.id})).map((function(e){return t.push(e.name)})),r.a.createElement(r.a.Fragment,null,h.user?r.a.createElement("div",null,r.a.createElement(oe.a,{categoryValue:o,onChange:function(t,a){i(a),e.callBackFromParent&&e.callBackFromParent(a)},inputCategoryValue:f,onInputChange:function(e,t){b(t)},options:t,renderInput:function(e){return r.a.createElement(ce.a,Object.assign({},e,{label:"Category",variant:"outlined"}))}})):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"You are not logged in"),r.a.createElement(V.b,{to:"/login"},"Log in"))))}var ge=a(665),pe=a(682);function fe(e){var t=Object(n.useState)("all"),a=Object(s.a)(t,2),c=a[0],o=a[1];return r.a.createElement(pe.a,{value:c,exclusive:!0,size:"medium",style:{position:"relative",display:"flex",justifyContent:"center",paddingTop:30,paddingBottom:15},onChange:function(t,a){null!==a&&(o(a),e.callBackFromParent&&e.callBackFromParent(a))},"aria-label":"period options"},r.a.createElement(ge.a,{value:"week","aria-label":"week period"},"Week"),r.a.createElement(ge.a,{value:"month","aria-label":"month period"},"Month"),r.a.createElement(ge.a,{value:"all","aria-label":"all period"},"All"))}var be=a(144),he=a(666),Ee=a(446),Oe=a(384),ve=Object(p.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function je(e){var t=ve();return r.a.createElement("div",null,r.a.createElement(Ee.a,{className:t.backdrop,open:e.open},r.a.createElement(Oe.a,{color:"inherit"})))}function ye(){var e=Object(ne.a)(["\n{\n    products {\n        id\n        name\n        price\n        category\n        userID\n        priceArray\n        dateArray\n    }\n}"]);return ye=function(){return e},e}var we=Object(ie.a)(ye());var xe=function(){var e=Object(n.useState)(),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(le.c)(we),i=o.loading,l=o.error,u=o.data,d=Object(n.useContext)(q).userData,m=Object(n.useState)({}),g=Object(s.a)(m,2),f=g[0],b=g[1],h=Object(n.useState)("all"),E=Object(s.a)(h,2),O=E[0],v=E[1],j=Object(p.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(1),textAlign:"center",background:"#212029"}}}))();function y(e){var t=new Date(parseInt(e));return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()}function w(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].getTime());return t}function x(e){for(var t=[],a=0;a<e.length;a++)t.push(new Date(parseInt(e[a])));return t}function S(e,t){return"week"===e&&t.length>7?t.splice(-7):"month"===e&&t.length>31?t.splice(-31):t}function C(e,t){var a=[],n=[],r=x(e);if(1===r.length)n.push(t[0]),a.push(r[0]);else for(var c=0;c<r.length;c++)c!==r.length-1&&r[c].getDate()===r[c+1].getDate()&&r[c].getMonth()===r[c+1].getMonth()&&r[c].getFullYear()===r[c+1].getFullYear()?t[c]<t[c+1]?(n.push(t[c]),a.push(r[c]),c++):(a.push(r[c+1]),n.push(t[c+1]),c++):(n.push(t[c]),a.push(r[c]));return[w(a),n]}function k(e,t){var a,n;return 0===t.length&&0===e.length?[]:0===e.length?t:(0===t.length?(a=e[0],n=e[e.length-1]):(console.log("bump4"),console.log(e),console.log("firstdate "+parseInt(e[0])),console.log("lastdate "+parseInt(e[e.length-1])),console.log(t),console.log("complete first date "+parseInt(t[0])),console.log("complete last date "+parseInt(t[t.length-1])),a=parseInt(e[0])<=parseInt(t[0])?e[0]:t[0],n=parseInt(e[e.length-1])<=parseInt(t[t.length-1])?t[t.length-1]:e[e.length-1],console.log("start "+a),console.log("end"+n)),function(e,t){var a=[y(e)];for(t=y(t);a[a.length-1]<parseInt(t);)a.push(parseInt(a[a.length-1])+864e5);return a}(a,n))}function I(e,t,a){var n=[],r=0;t=x(t),a=x(a);for(var c=0;c<a.length;c++)r<t.length&&t[r].getDate()===a[c].getDate()&&t[r].getMonth()===a[c].getMonth()&&t[r].getFullYear()===a[c].getFullYear()?(n.push(e[r]),r++):n.push(null);return n}Object(n.useEffect)((function(){void 0!==d&&void 0!==d.user&&void 0!==u&&function(e,t,n){console.log(d.user.id);for(var r=[],c=[],o=["#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],i=[],l=0;l<e.length;l++)e[l].userID===t.id&&e[l].category===a&&i.push(e[l]);for(var u=[],s=0;s<i.length;s++){var m=C(i[s].dateArray,i[s].priceArray);i[s].dateArray=m[0],i[s].priceArray=m[1],u=k(i[s].dateArray,u)}console.log("last date"+u.length);for(var g=0;g<i.length;g++)c.push(I(i[g].priceArray,i[g].dateArray,u));for(var p=0;p<i.length;p++)r.push({label:i[p].name,data:S(n,c[p]),fill:!1,borderColor:o[p],backgroundColor:o[p]});var f=[];for(l=0;l<u.length;l++){var h=new Date(u[l]);f.push(h.getDate()+" "+(h.getMonth()+1)+" "+h.getFullYear())}console.log(n),b({labels:S(n,f),datasets:r})}(u.products,d.user,O)}),[u,d,a,O]);var D=Object(be.a)({palette:{type:"dark"}});return i?r.a.createElement(je,{open:!0}):l?r.a.createElement("p",null,"Error! :("):r.a.createElement(r.a.Fragment,null,d.user?r.a.createElement("div",{className:j.paper,style:{margin:30,padding:30}},r.a.createElement("div",{style:{marginTop:-30}},r.a.createElement(he.a,{theme:D},r.a.createElement("h2",null,"My Profile"),r.a.createElement("h2",null,"Please choose a category to display"),r.a.createElement(me,{callBackFromParent:c}),r.a.createElement(fe,{callBackFromParent:v}),r.a.createElement(re,{chartData:f,catValue:a}),r.a.createElement("p",null,"Click on individual products to remove them from view")))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"You are not logged in"),r.a.createElement(V.b,{to:"/login"},"Log in")))},Se=a(70),Ce=a.n(Se),ke=a(681),Ie=Object(p.a)((function(e){return{root:{width:700,margin:e.spacing(3)},margin:{height:e.spacing(3)}}})),De=[{value:0,label:"Off"},{value:4,label:"4 Hours"},{value:8,label:"8 Hours"},{value:12,label:"12 Hours"},{value:16,label:"16 Hours"},{value:20,label:"20 Hours"},{value:24,label:"24 Hours"}];function Fe(e){return"".concat(e)}function Pe(e){var t=Ie();return r.a.createElement("div",{className:t.root},r.a.createElement(J.a,{id:"discrete-slider-custom",gutterBottom:!0},"Choose how often to recieve email notifications if there are price alerts"),r.a.createElement(ke.a,{defaultValue:24,getAriaValueText:Fe,"aria-labelledby":"discrete-slider-custom",step:4,min:0,max:24,onChange:e.editSliderValue,valueLabelDisplay:"auto",marks:De}))}function Ae(e){var t=Object(p.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginBottom:e.spacing(1)}}}))();return r.a.createElement(ce.a,{placeholder:e.placeholder,fullWidth:!0,margin:"normal",className:t.textField,InputLabelProps:{shrink:!0},variant:"outlined",onChange:e.onChange,value:e.value,type:e.type})}var Re=a(36),$e=a.n(Re);function Ne(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),i=Object(s.a)(o,2),d=i[0],m=i[1],g=Object(n.useState)(null),f=Object(s.a)(g,2),b=f[0],h=f[1],E=Object(n.useState)(null),O=Object(s.a)(E,2),v=O[0],j=O[1],y=Object(n.useState)(null),w=Object(s.a)(y,2),x=w[0],S=w[1],C=(Object(p.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginBottom:e.spacing(1)},root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),Object(n.useContext)(q).userData),k=C.user.id,I=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={id:k,newEmail:a,currPassword:d,newPassword:b,newDisplayName:v,notiSettings:x},e.next=5,Ce.a.post("http://localhost:5000/users/EditUser",n);case 5:r=e.sent,localStorage.setItem("auth-token",r.data.token),Re.store.addNotification({title:"Success:",message:"Your details have been updated, please log in again",type:"success",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2e3,onScreen:!0}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),e.t0.response.data.msg&&Re.store.addNotification({title:"Error:",message:"".concat(e.t0.response.data.msg),type:"danger",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2e3,onScreen:!0}});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"page"},r.a.createElement("h2",null,"Edit account information"),r.a.createElement(Pe,{editSliderValue:function(e){return S(e)}}),r.a.createElement(Ae,{placeholder:"New email",onChange:function(e){return c(e.target.value)},type:"email"}),r.a.createElement(Ae,{placeholder:"New password",onChange:function(e){return h(e.target.value)}}),r.a.createElement(Ae,{placeholder:C.user.displayName,onChange:function(e){return j(e.target.value)},type:"email"}),r.a.createElement(Ae,{placeholder:"Current password",variant:"outlined",onChange:function(e){return m(e.target.value)},type:"password"}),r.a.createElement("div",{style:{paddingTop:10}},r.a.createElement(ee,{onClick:I,fullWidth:!0,text:"Submit"})))}var Le=function(e){var t=Object(n.useContext)(q).userData;return r.a.createElement(r.a.Fragment,null,t.user?r.a.createElement(Q.a,{style:{backgroundColor:"#212029",margin:15,padding:30}},r.a.createElement("div",null,r.a.createElement("h1",null,"User settings"),r.a.createElement(Ne,null))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"You are not logged in"),r.a.createElement(V.b,{to:"/login"},"Log in")))},Be=a(153),Te=(a(667),a(154)),We=a.n(Te);a(430),Object(p.a)((function(e){return{root:{display:"flex",alignItems:"center"},wrapper:{margin:e.spacing(1),position:"relative"},buttonSuccess:{backgroundColor:Be.a[500],"&:hover":{backgroundColor:Be.a[700]}},fabProgress:{color:Be.a[500],position:"absolute",top:-6,left:-6,zIndex:1},buttonProgress:{color:Be.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));function Ye(){var e=Object(ne.a)(["\n{\n    categories {\n        id\n        name  \n    }\n}"]);return Ye=function(){return e},e}function Ue(){var e=Object(ne.a)(["\n  mutation CreateProduct($name: String!, $category: String!, $brand: String!, $price: Float!, $url: String!, $minPrice: Float!, $priceArray: [Float]!, $dateArray: [String!]!, $userID: String!){\n  createProduct(name: $name, category: $category, brand: $brand, price: $price, url: $url, minPrice: $minPrice, priceArray: $priceArray, dateArray: $dateArray, userID: $userID) {\n    id\n    name\n    dateArray\n  }\n}\n"]);return Ue=function(){return e},e}function He(){var e=Object(ne.a)(["\n{\n    products {\n        id\n        name\n        price\n        dateArray\n    }\n}"]);return He=function(){return e},e}var ze=Object(ie.a)(He()),Me=Object(ie.a)(Ue()),Ve=Object(ie.a)(Ye()),qe=Object(p.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginBottom:e.spacing(1)},root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),Qe=["Amazon","Lazada","Qoo10"];function Ge(){var e=Object(le.c)(Ve),t=e.loading,a=e.error,c=(e.data,qe()),o=Object(le.b)(Me),i=Object(s.a)(o,1)[0],l=Object(n.useState)(Qe[0]),u=Object(s.a)(l,2),d=u[0],m=u[1],g=Object(n.useState)(""),p=Object(s.a)(g,2),f=p[0],b=p[1],h=Object(n.useState)(),E=Object(s.a)(h,2),O=E[0],v=E[1],j=Object(n.useState)(""),y=Object(s.a)(j,2),w=y[0],x=y[1],S=Object(n.useState)(0),C=Object(s.a)(S,2),k=(C[0],C[1]),I=Object(n.useState)(0),D=Object(s.a)(I,2),F=D[0],P=D[1],A=Object(n.useState)(""),R=Object(s.a)(A,2),$=R[0],N=R[1],L=Object(n.useContext)(q).userData,B=Object(n.useState)(new Date),T=Object(s.a)(B,2),W=T[0],Y=T[1];Object(n.useEffect)((function(){var e=setInterval((function(){Y(new Date)}),1e3);return function(){return clearInterval(e)}}),[]);W.getFullYear(),W.getMonth(),W.getDate(),W.getHours(),W.getMinutes();return t?r.a.createElement("p",null,"Loading..."):a?r.a.createElement("p",null,"Error! :("):r.a.createElement("div",null,r.a.createElement(Ae,{onChange:function(e){var t=e.target.value;N(t)},value:$,placeholder:"Product url"}),r.a.createElement("div",{style:{paddingTop:10,paddingBottom:50}},r.a.createElement(ee,{onClick:function(){""!==$?(console.log("".concat($)),Re.store.addNotification({title:"Hold on",message:"Your product information is being retrieved",type:"info",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:4e3,onScreen:!0}})):Re.store.addNotification({title:"Error:",message:"URL cannot be empty",type:"danger",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2e3,onScreen:!0}})},fullWidth:!0,className:c.textField,text:"Autocomplete"})),r.a.createElement(me,{callBackFromParent:v}),r.a.createElement("div",{className:c.textField,style:{paddingTop:20}},r.a.createElement(oe.a,{brandValue:d,onChange:function(e,t){m(t)},inputBrandValue:f,onInputChange:function(e,t){b(t)},id:"controllable-states-demo",options:Qe,renderInput:function(e){return r.a.createElement(ce.a,Object.assign({},e,{label:"Brand",variant:"outlined"}))}})),r.a.createElement("div",null,r.a.createElement(Ae,{id:"outlined-full-width",placeholder:"Product name",fullWidth:!0,margin:"normal",className:c.textField,InputLabelProps:{shrink:!0},variant:"outlined",onChange:function(e){var t=e.target.value;x(t)},value:w}),r.a.createElement(Ae,{id:"outlined-margin-none",placeholder:"Price floor",className:c.textField,onChange:function(e){var t=e.target.value;null!==t&&P(parseFloat(t))}}),r.a.createElement("div",{style:{paddingTop:10}},r.a.createElement(ee,{onClick:function(){var e=(new Date).getTime().toString(10);null!==d&&null!==O&&void 0!==O&&""!==w&&""!==$?(i({variables:{name:w,category:O,brand:d,price:0,url:$,minPrice:F,priceArray:[],dateArray:[e],userID:L.user.id},refetchQueries:[{query:ze}]}),x(""),k(""),N(""),Re.store.addNotification({title:"Success:",message:"Your product is being processed! Please wait a moment for it to appear on your Products Page",type:"success",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2e3,onScreen:!0}})):Re.store.addNotification({title:"Error:",message:"Not at required fields are entered",type:"danger",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2e3,onScreen:!0}})},fullWidth:!0,text:"Submit"}))))}function Je(){var e=Object(ne.a)(["\n  mutation createCategory($name: String!, $userID: String!){\n  createCategory(name: $name, userID: $userID) {\n    id\n    name\n    userID\n  }\n}\n"]);return Je=function(){return e},e}function _e(){var e=Object(ne.a)(["\n{\n    categories {\n        id\n        name\n    }\n}"]);return _e=function(){return e},e}var Ze=Object(ie.a)(_e()),Ke=Object(ie.a)(Je()),Xe=Object(p.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginBottom:e.spacing(1)}}}));function et(){Xe();var e=Object(le.b)(Ke),t=Object(s.a)(e,1)[0],a=Object(n.useState)(""),c=Object(s.a)(a,2),o=c[0],i=c[1],l=Object(n.useContext)(q).userData;return r.a.createElement("div",null,r.a.createElement(Ae,{placeholder:"Add New Category",onChange:function(e){var t=e.target.value;i(t)},value:o}),r.a.createElement("div",{style:{paddingTop:10}},r.a.createElement(ee,{onClick:function(){""!==o?(t({variables:{name:o,userID:l.user.id},refetchQueries:[{query:Ze}]}),i(""),Re.store.addNotification({title:"Success!",message:"Your product is being processed! Please wait a moment for it to appear on your Products Page",type:"success",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2e3,onScreen:!0}})):Re.store.addNotification({title:"Error:",message:"Not all required fields are entered",type:"danger",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2e3,onScreen:!0}})},fullWidth:!0,text:"Submit"})))}var tt=function(){var e=Object(n.useContext)(q).userData;return r.a.createElement(r.a.Fragment,null,e.user?r.a.createElement(Q.a,{style:{backgroundColor:"#212029",margin:30,padding:30}},r.a.createElement("div",null,r.a.createElement("h2",null,"Add your new product below"),r.a.createElement(Ge,null))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"You are not logged in"),r.a.createElement(V.b,{to:"/login"},"Log in")))},at=a(246),nt=a.n(at),rt=a(254),ct=a.n(rt),ot=a(94),it=a.n(ot),lt=a(247),ut=a.n(lt),st=a(248),dt=a.n(st),mt=a(250),gt=a.n(mt),pt=a(251),ft=a.n(pt),bt=a(252),ht=a.n(bt),Et=a(255),Ot=a.n(Et),vt=a(249),jt=a.n(vt),yt=a(253),wt=a.n(yt),xt=a(256),St=a.n(xt),Ct=a(433),kt=a.n(Ct),It=a(306),Dt=a.n(It),Ft=a(431),Pt=a.n(Ft),At=a(432),Rt=a.n(At),$t=a(312),Nt=a.n($t);function Lt(){var e=Object(ne.a)(["\n    mutation addPriceAndDate($id: ID!, $url: String!, $date: String!, $price: Float!, $priceArray: [Float]!, $dateArray: [String!]!) {\n        addPriceAndDate(id: $id, url: $url, date: $date, price: $price, priceArray: $priceArray, dateArray: $dateArray)\n    }\n"]);return Lt=function(){return e},e}function Bt(){var e=Object(ne.a)(["\nmutation UpdateProduct($id: ID!, $name: String!, $url: String!) {\n    updateProduct(id: $id, name: $name, url: $url)\n}\n"]);return Bt=function(){return e},e}function Tt(){var e=Object(ne.a)(["\n    mutation RemoveProduct($id: ID!) {\n        removeProduct(id: $id)\n    }\n"]);return Tt=function(){return e},e}function Wt(){var e=Object(ne.a)(["\n{\n    products {\n        id\n        name\n        price\n        category\n        brand\n        url\n        userID\n        priceArray\n            dateArray\n    }\n}"]);return Wt=function(){return e},e}var Yt={Add:Object(n.forwardRef)((function(e,t){return r.a.createElement(nt.a,Object.assign({},e,{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return r.a.createElement(We.a,Object.assign({},e,{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return r.a.createElement(it.a,Object.assign({},e,{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return r.a.createElement(ut.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return r.a.createElement(Y.a,Object.assign({},e,{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return r.a.createElement(dt.a,Object.assign({},e,{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return r.a.createElement(jt.a,Object.assign({},e,{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return r.a.createElement(gt.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(ft.a,Object.assign({},e,{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(ht.a,Object.assign({},e,{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(Y.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return r.a.createElement(T.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return r.a.createElement(it.a,Object.assign({},e,{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return r.a.createElement(wt.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return r.a.createElement(ct.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return r.a.createElement(Ot.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return r.a.createElement(St.a,Object.assign({},e,{ref:t}))}))},Ut=Object(ie.a)(Wt()),Ht=Object(ie.a)(Tt()),zt=Object(ie.a)(Bt()),Mt=Object(ie.a)(Lt()),Vt=Object(p.a)((function(e){return{root:{width:"100%",maxWidth:"36ch",color:"#fff",backgroundColor:e.palette.background.paper},inline:{display:"inline"},toolbar:{backgroundColor:"white"},caption:{color:"red",fontSize:"20px"},selectIcon:{color:"green"},select:{color:"green",fontSize:"20px"},actions:{color:"blue"}}}));function qt(e){var t=Object(le.c)(Ut),a=t.loading,c=t.error,o=t.data,i=Object(le.b)(Ht),l=Object(s.a)(i,1)[0],u=Object(le.b)(zt),d=Object(s.a)(u,1)[0],m=Object(n.useState)(!1),g=Object(s.a)(m,2),p=g[0],f=g[1],b=Object(n.useState)(!0),h=Object(s.a)(b,2),E=h[0],O=h[1],v=Object(n.useContext)(q).userData,j=Object(le.b)(Mt),y=Object(s.a)(j,1)[0],w=(Vt(),Object(n.useState)(new Date)),x=Object(s.a)(w,2),S=x[0],C=x[1];Object(n.useEffect)((function(){var e=setInterval((function(){C(new Date)}),1e3);return function(){return clearInterval(e)}}),[]);var k=S.getTime().toString(10);var I=Object(be.a)({palette:{type:"dark"}});if(a)return r.a.createElement(je,{open:!0});if(c)return r.a.createElement("p",null,"Error! :(");var D=r.a.createElement("div",null,"My Products");return r.a.createElement(r.a.Fragment,null,o?r.a.createElement(he.a,{theme:I},r.a.createElement(Nt.a,{icons:Yt,style:{backgroundColor:"#212029",margin:30,padding:30},title:D,columns:[{title:"Name",field:"name"},{title:"Category",field:"category",editable:"never"},{title:"Brand",field:"brand",editable:"never"},{title:"Price",field:"price",type:"currency",editable:"never"},{title:"ID",field:"id",hidden:!0},{title:"URL",field:"url",hidden:E,editable:"onUpdate"},{title:"Price Array",field:"priceArray",hidden:!0},{title:"Date Array",field:"dateArray",hidden:!0}],data:o.products.filter((function(e){return e.userID===v.user.id})),editable:{onRowUpdate:function(e,t){return new Promise((function(a,n){setTimeout((function(){var n=t.id;console.log(e),console.log(t),d({variables:{id:n,name:e.name,url:e.url},refetchQueries:[{query:Ut}]}),a()}),1e3)}))}},actions:[{icon:Pt.a,tooltip:"Update Product",onClick:function(e,t){var a,n,r,c;console.log(t),a=t.id,n=t.url,r=t.dateArray,c=t.priceArray,y({variables:{id:a,url:n,date:k,price:0,priceArray:c,dateArray:r},refetchQueries:[{query:Ut}]})}},{icon:Dt.a,tooltip:"Delete Product",onClick:function(e,t){l({variables:{id:t.id},refetchQueries:[{query:Ut}]})}}],components:{Toolbar:function(e){return r.a.createElement("div",null,r.a.createElement($t.MTableToolbar,e),r.a.createElement("div",{style:{padding:"0px 10px"}},r.a.createElement(pe.a,{size:"small",style:{position:"relative",margin:5,padding:5}},r.a.createElement(ge.a,{style:{colour:"#fff"},value:"Show URL","aria-label":"Show URL"},r.a.createElement(Rt.a,{onClick:function(){return O(!E)}})),r.a.createElement(ge.a,{value:"Enable Sort","aria-label":"Enable Sort"},r.a.createElement(kt.a,{onClick:function(){return f(!p)}})))))}},options:{actionsColumnIndex:-1,grouping:p,headerStyle:{backgroundColor:"#212029"}}})):null)}function Qt(){var e=Object(ne.a)(["\n    mutation RemoveProduct($id: ID!) {\n        removeProduct(id: $id)\n    }\n"]);return Qt=function(){return e},e}function Gt(){var e=Object(ne.a)(["\n    query UserProducts($info: String!) {\n        userProducts(info: $info) {\n            id\n            name\n            price\n            category\n            brand\n            url\n            userID\n        }\n    }\n"]);return Gt=function(){return e},e}function Jt(){var e=Object(ne.a)(["\n{\n    products {\n        id\n        name\n        price\n        category\n        brand\n        url\n        userID\n    }\n}"]);return Jt=function(){return e},e}Object(n.forwardRef)((function(e,t){return r.a.createElement(nt.a,Object.assign({},e,{ref:t}))})),Object(n.forwardRef)((function(e,t){return r.a.createElement(We.a,Object.assign({},e,{ref:t}))})),Object(n.forwardRef)((function(e,t){return r.a.createElement(it.a,Object.assign({},e,{ref:t}))})),Object(n.forwardRef)((function(e,t){return r.a.createElement(ut.a,Object.assign({},e,{ref:t}))})),Object(n.forwardRef)((function(e,t){return r.a.createElement(Y.a,Object.assign({},e,{ref:t}))})),Object(n.forwardRef)((function(e,t){return r.a.createElement(dt.a,Object.assign({},e,{ref:t}))})),Object(n.forwardRef)((function(e,t){return r.a.createElement(jt.a,Object.assign({},e,{ref:t}))})),Object(n.forwardRef)((function(e,t){return r.a.createElement(gt.a,Object.assign({},e,{ref:t}))})),Object(n.forwardRef)((function(e,t){return r.a.createElement(ft.a,Object.assign({},e,{ref:t}))})),Object(n.forwardRef)((function(e,t){return r.a.createElement(ht.a,Object.assign({},e,{ref:t}))})),Object(n.forwardRef)((function(e,t){return r.a.createElement(Y.a,Object.assign({},e,{ref:t}))})),Object(n.forwardRef)((function(e,t){return r.a.createElement(T.a,Object.assign({},e,{ref:t}))})),Object(n.forwardRef)((function(e,t){return r.a.createElement(it.a,Object.assign({},e,{ref:t}))})),Object(n.forwardRef)((function(e,t){return r.a.createElement(wt.a,Object.assign({},e,{ref:t}))})),Object(n.forwardRef)((function(e,t){return r.a.createElement(ct.a,Object.assign({},e,{ref:t}))})),Object(n.forwardRef)((function(e,t){return r.a.createElement(Ot.a,Object.assign({},e,{ref:t}))})),Object(n.forwardRef)((function(e,t){return r.a.createElement(St.a,Object.assign({},e,{ref:t}))})),Object(ie.a)(Jt());var _t=Object(ie.a)(Gt()),Zt=Object(ie.a)(Qt()),Kt=Object(p.a)((function(e){return{root:{width:"100%",maxWidth:"36ch",backgroundColor:"#212029"},inline:{display:"inline"},paper:{padding:e.spacing(1),textAlign:"center",backgroundColor:"#212029"}}}));var Xt=function(){var e=Object(le.b)(Zt),t=(Object(s.a)(e,1)[0],Object(n.useState)()),a=Object(s.a)(t,2),c=(a[0],a[1],Object(n.useState)([])),o=Object(s.a)(c,2),i=(o[0],o[1],Object(n.useContext)(q).userData),l=Object(le.a)(_t,{pollInterval:500}),u=Object(s.a)(l,2),d=(u[0],u[1]),m=d.loading,g=d.error;return d.data,Kt(),m?r.a.createElement(je,{open:!0}):g?r.a.createElement("p",null,"Error! :("):r.a.createElement(r.a.Fragment,null,i.user?r.a.createElement("div",null,r.a.createElement(qt,{userID:i.user.id})):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"You are not logged in"),r.a.createElement(V.b,{to:"/login"},"Log in")))},ea=a(642),ta=a(678),aa=a(407);function na(){var e=Object(ne.a)(["\n    mutation RemoveCategory($id: ID!) {\n        removeCategory(id: $id)\n    }\n"]);return na=function(){return e},e}function ra(){var e=Object(ne.a)(["\n    mutation RemoveProduct($id: ID!) {\n        removeProduct(id: $id)\n    }\n"]);return ra=function(){return e},e}function ca(){var e=Object(ne.a)(["\n{\n    products {\n        id\n        name\n        price\n        category\n    }\n}"]);return ca=function(){return e},e}function oa(){var e=Object(ne.a)(["\n{\n    categories {\n        id\n        name\n        userID\n    }\n}"]);return oa=function(){return e},e}var ia=Object(ie.a)(oa()),la=Object(ie.a)(ca()),ua=Object(ie.a)(ra()),sa=Object(ie.a)(na());var da=function(e){var t,a=Object(le.c)(la),c=a.loading,o=a.error,i=a.data,l=Object(le.c)(ia),u=l.loading,d=l.error,m=l.data,g=Object(le.b)(ua),p=Object(s.a)(g,1)[0],f=Object(le.b)(sa),b=Object(s.a)(f,1)[0],h=Object(n.useContext)(q).userData;return u?r.a.createElement("p",null,"Loading..."):d?r.a.createElement("p",null,"Error! :("):c?r.a.createElement("p",null,"Products Loading..."):o?r.a.createElement("p",null,"Products Error! :("):(void 0!==h&&void 0!==h.user&&(t=String(h.user.id)),r.a.createElement(r.a.Fragment,null,h.user?r.a.createElement(Q.a,{style:{backgroundColor:"#212029",margin:30,padding:30}},r.a.createElement("h1",null,"My Categories"),r.a.createElement(v.a,null,m.categories.map((function(e){if(e.userID===t){var a=0;return i.products.map((function(t){return t.category===e.name?a+=1:a+=0})),r.a.createElement(ea.a,null,r.a.createElement(aa.a,{primary:"".concat(e.name),secondary:"".concat(a," Items")}),r.a.createElement(ta.a,null,r.a.createElement(y.a,{onClick:function(){return b({variables:{id:(t=e).id},refetchQueries:[{query:ia}]}),void i.products.map((function(e){return e.category===t.name&&p({variables:{id:e.id},refetchQueries:[{query:la}]}),null}));var t}},r.a.createElement(it.a,null))))}return null}))),r.a.createElement(et,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"You are not logged in"),r.a.createElement(V.b,{to:"/login"},"Log in"))))},ma=a(434),ga=a.n(ma);function pa(){var e=Object(ne.a)(["\n    mutation addPriceAndDate($id: ID!, $url: String!, $date: String!, $price: Float!, $priceArray: [Float!]!, $dateArray: [String!]!) {\n        addPriceAndDate(id: $id, url: $url, date: $date, price: $price, priceArray: $priceArray, dateArray: $dateArray)\n    }\n"]);return pa=function(){return e},e}function fa(){var e=Object(ne.a)(["\n    mutation RemoveProduct($id: ID!) {\n        removeProduct(id: $id)\n    }\n"]);return fa=function(){return e},e}function ba(){var e=Object(ne.a)(["\n{\n    products {\n        id\n        name\n        price\n        category\n        url\n        userID\n        priceArray\n        dateArray\n    }\n}"]);return ba=function(){return e},e}var ha=Object(ie.a)(ba()),Ea=Object(ie.a)(fa()),Oa=Object(ie.a)(pa()),va=Object(p.a)((function(e){return{root:{width:"100%",maxWidth:"36ch",backgroundColor:e.palette.background.paper},inline:{display:"inline"}}}));var ja=function(){var e=Object(le.c)(ha),t=e.loading,a=e.error,c=e.data,o=Object(le.b)(Ea),i=Object(s.a)(o,1)[0],l=Object(le.b)(Oa),u=Object(s.a)(l,1)[0],d=Object(n.useState)(),m=Object(s.a)(d,2),g=m[0],p=m[1],f=Object(n.useState)([]),b=Object(s.a)(f,2),h=b[0],E=b[1],O=Object(n.useContext)(q).userData,j=va();Object(n.useEffect)((function(){c&&O&&O.user&&E(c.products.filter((function(e){return e.userID===O.user.id&&(void 0===g||null===g||g===e.category)})))}),[g,c,O]);var w=Object(n.useState)(new Date),x=Object(s.a)(w,2),S=x[0],C=x[1];Object(n.useEffect)((function(){var e=setInterval((function(){C(new Date)}),1e3);return function(){return clearInterval(e)}}),[]);var k=S.getTime().toString(10);return t?r.a.createElement("p",null,"Loading..."):a?r.a.createElement("p",null,"Error! :("):r.a.createElement(r.a.Fragment,null,O.user?r.a.createElement(Q.a,{style:{backgroundColor:"#27293d",margin:30,padding:30}},r.a.createElement("h1",null,"Product list"),r.a.createElement(v.a,null,r.a.createElement(me,{callBackFromParent:p}),h.map((function(e){var t="checkbox-list-label-".concat(e.id);return r.a.createElement(ea.a,null,r.a.createElement(aa.a,{id:t,primary:"".concat(e.name),secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{component:"span",variant:"body2",className:j.inline,color:"textPrimary"},"".concat(e.category)),"  S$".concat(e.price))}),r.a.createElement(ta.a,null,r.a.createElement(y.a,{onClick:function(){!function(e){u({variables:{id:e.id,url:e.url,date:k,price:0,priceArray:e.priceArray,dateArray:e.dateArray}})}(e)}},r.a.createElement(ga.a,null)),r.a.createElement(y.a,{onClick:function(){i({variables:{id:e.id},refetchQueries:[{query:ha}]})}},r.a.createElement(it.a,null))))})))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"You are not logged in"),r.a.createElement(V.b,{to:"/login"},"Log in")))};function ya(){var e=Object(n.useState)(),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(),i=Object(s.a)(o,2),d=i[0],m=i[1],g=Object(n.useState)(),f=Object(s.a)(g,2),b=f[0],h=f[1],E=Object(n.useState)(),O=Object(s.a)(E,2),v=O[0],j=O[1],y=Object(n.useContext)(q).setUserData,w=Object(M.g)(),x=(Object(p.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginBottom:e.spacing(1)},root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}))(),function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={email:a,password:d,passwordCheck:b,displayName:v},e.next=5,Ce.a.post("http://localhost:5000/users/register",n);case 5:return e.next=7,Ce.a.post("http://localhost:5000/users/login",{email:a,password:d});case 7:r=e.sent,y({token:r.data.token,user:r.data.user}),localStorage.setItem("auth-token",r.data.token),w.push("/"),Re.store.addNotification({title:"Registration successful:",message:"Please log in",type:"success",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2e3,onScreen:!0}}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),e.t0.response.data.msg&&Re.store.addNotification({title:"Error:",message:"".concat(e.t0.response.data.msg),type:"danger",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2e3,onScreen:!0}});case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}());return r.a.createElement("div",{className:"page"},r.a.createElement("h2",null,"Register"),r.a.createElement(Ae,{placeholder:"Email",fullWidth:!0,onChange:function(e){return c(e.target.value)},value:a}),r.a.createElement(Ae,{placeholder:"Password",onChange:function(e){return m(e.target.value)},value:d}),r.a.createElement(Ae,{placeholder:"Verify password",onChange:function(e){return h(e.target.value)},value:d}),r.a.createElement(Ae,{placeholder:"Display name",onChange:function(e){return j(e.target.value)}}),r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(ee,{handleSubmit:x,fullWidth:!0,text:"Submit"})))}function wa(e){var t=Object(n.useContext)(q),a=t.userData,c=t.setUserData,o=Object(M.g)();return r.a.createElement("div",{style:{marginTop:5}},a.user?r.a.createElement(ee,{handleSubmit:function(){c({token:void 0,user:void 0}),localStorage.setItem("auth-token",""),e.closeDrawer(),o.push("/"),Re.store.addNotification({title:"Success:",message:"You have logged out",type:"success",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:1e3,onScreen:!0}})},fullWidth:!1,text:"Log out"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(ee,{handleSubmit:function(){return o.push("/register")},fullWidth:!1,text:"Register"}),r.a.createElement(ee,{handleSubmit:function(){return o.push("/login")},fullWidth:!1,text:"Log in"})))}function xa(){var e=Object(n.useState)(),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(),i=Object(s.a)(o,2),d=i[0],m=i[1],g=Object(n.useContext)(q).setUserData,f=Object(M.g)(),b=(Object(p.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginBottom:e.spacing(1)},root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}))(),function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={email:a,password:d},e.next=5,Ce.a.post("http://localhost:5000/users/login",n);case 5:r=e.sent,g({token:r.data.token,user:r.data.user}),localStorage.setItem("auth-token",r.data.token),f.push("/"),Re.store.addNotification({title:"Login successful:",message:"Welcome!",type:"success",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:1e3,onScreen:!0}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),e.t0.response.data.msg&&Re.store.addNotification({title:"Error:",message:"".concat(e.t0.response.data.msg),type:"danger",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:1e3,onScreen:!0}});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}());return r.a.createElement("div",null,r.a.createElement("h2",null,"Log in"),r.a.createElement(Ae,{placeholder:"Email",onChange:function(e){return c(e.target.value)},value:a,type:"email"}),r.a.createElement(Ae,{placeholder:"Password",onChange:function(e){return m(e.target.value)},value:d,type:"password"}),r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(ee,{handleSubmit:b,fullWidth:!0,text:"Log in"})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#4d6d80",marginTop:15,marginLeft:15}},r.a.createElement("button",{align:"center",onClick:function(){return f.push("/ForgotPassword")}},"Forgot Password")))}function Sa(){var e=Object(n.useState)(),t=Object(s.a)(e,2),a=t[0],c=t[1],o=(Object(n.useContext)(q).setUserData,Object(M.g)()),i=(Object(p.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginBottom:e.spacing(1)},root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}))(),function(){var e=Object(u.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={email:a},e.next=5,Ce.a.post("http://localhost:5000/users/ForgotPassword",n);case 5:r=e.sent,localStorage.setItem("auth-token",r.data.token),o.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),e.t0.response.data.msg&&Re.store.addNotification({title:"Error:",message:"".concat(e.t0.response.data.msg),type:"danger",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2e3,onScreen:!0}});case 13:Re.store.addNotification({title:"Success:",message:"Password reset link has been sent to you",type:"success",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2e3,onScreen:!0}});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}());return r.a.createElement("div",{className:"page"},r.a.createElement("h2",null,"Reset Password"),r.a.createElement(Ae,{placeholder:"Email",onChange:function(e){return c(e.target.value)},value:a}),r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(ee,{handleSubmit:i,fullWidth:!0,text:"Send reset link"})))}function Ca(e){var t=Object(n.useState)(),a=Object(s.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(),d=Object(s.a)(i,2),m=d[0],g=d[1],f=(Object(n.useContext)(q).setUserData,Object(M.g)()),b=(Object(p.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginBottom:e.spacing(1)},root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}))(),function(){var t=Object(u.a)(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,n={newPass:c,confirmNewPass:m,resetLink:e.match.params.token},t.next=5,Ce.a.post("http://localhost:5000/users/ResetPassword",n);case 5:return t.next=7,Ce.a.post("http://localhost:5000/users/ResetPassword",{data:n});case 7:r=t.sent,localStorage.setItem("auth-token",r.data.token),alert("Your password has been reset, please login"),f.push("/login"),Re.store.addNotification({title:"Success:",message:"Password has been reset",type:"success",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2e3,onScreen:!0}}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),t.t0.response.data.msg&&Re.store.addNotification({title:"Error:",message:"".concat(t.t0.response.data.msg),type:"danger",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:2e3,onScreen:!0}});case 17:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}());return r.a.createElement("div",{className:"page"},r.a.createElement("h2",null,"Please enter your new password"),r.a.createElement(Ae,{placeholder:"Password",onChange:function(e){return o(e.target.value)},type:"password"}),r.a.createElement(Ae,{placeholder:"Re-type password",onChange:function(e){return g(e.target.value)},type:"password"}),r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(ee,{handleSubmit:b,fullWidth:!0,text:"Submit"})))}var ka=a(435),Ia=a.n(ka),Da=Object(p.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240,backgroundColor:"#21202a",boxShadow:"0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12)"},drawerHeader:Object(m.a)(Object(m.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}}));function Fa(e){var t=Da(),a=Object(f.a)(),c=r.a.useState(!1),o=Object(s.a)(c,2),i=o[0],l=o[1],u=r.a.useState(!1),m=Object(s.a)(u,2),p=m[0],w=m[1],S=(Object(n.useContext)(q).userData,function(){l(!1)});return Object(n.useEffect)((function(){e.user&&void 0!==e.user.user?w(!0):w(!1)}),[e.user]),Object(n.useEffect)((function(){})),r.a.createElement("div",{className:t.root},r.a.createElement(h.a,null),r.a.createElement(E.a,{position:"fixed",className:Object(g.a)(t.appBar,Object(d.a)({},t.appBarShift,i))},r.a.createElement(O.a,{id:"header"},p?r.a.createElement(y.a,{color:"primary","aria-label":"open drawer",onClick:function(){if(console.log(e),!e.user||void 0===e.user.user)return r.a.createElement(M.a,{to:"/login"});l(!0)},edge:"start",className:Object(g.a)(t.menuButton,i&&t.hide)},r.a.createElement(x.a,null)):null,r.a.createElement("div",{id:"title"},r.a.createElement(V.b,{to:"/"},r.a.createElement("img",{src:Ia.a,alt:"Trackit_logo",height:"60",style:{marginTop:10}}))),r.a.createElement("div",{id:"header"},r.a.createElement(wa,{closeDrawer:S})))),r.a.createElement(b.a,{className:t.drawer,variant:"persistent",anchor:"left",open:i,classes:{paper:t.drawerPaper}},r.a.createElement("div",{className:t.drawerHeader},r.a.createElement(y.a,{onClick:S},"ltr"===a.direction?r.a.createElement(T.a,null):r.a.createElement(Y.a,null))),r.a.createElement(j.a,null),r.a.createElement(v.a,null,r.a.createElement(H.a,null,r.a.createElement(z.a,{component:V.b,to:"/"},r.a.createElement(U.a,null,r.a.createElement(C.a,{color:"primary"})),"Home"),r.a.createElement(z.a,{component:V.b,to:"/profile"},r.a.createElement(U.a,null,r.a.createElement(I.a,{color:"primary"})),"Profile"),r.a.createElement(z.a,{component:V.b,to:"/products"},r.a.createElement(U.a,null,r.a.createElement($.a,{color:"primary"})),"Products"),r.a.createElement(z.a,{component:V.b,to:"/categories"},r.a.createElement(U.a,null,r.a.createElement(L.a,{color:"primary"})),"Categories"),r.a.createElement(z.a,{component:V.b,to:"/addnew"},r.a.createElement(U.a,null,r.a.createElement(F.a,{color:"primary"})),"Add Products"),r.a.createElement(z.a,{component:V.b,to:"/settings"},r.a.createElement(U.a,null,r.a.createElement(A.a,{color:"primary"})),"Settings")))),r.a.createElement("main",{className:Object(g.a)(t.content,Object(d.a)({},t.contentShift,i))},r.a.createElement("div",{className:t.drawerHeader}),r.a.createElement(M.d,null,r.a.createElement(M.b,{exact:!0,path:"/",component:ae}),r.a.createElement(M.b,{exact:!0,path:"/Profile",component:xe}),r.a.createElement(M.b,{exact:!0,path:"/Login",component:xa}),r.a.createElement(M.b,{exact:!0,path:"/Settings",component:Le}),r.a.createElement(M.b,{exact:!0,path:"/Products",component:Xt}),r.a.createElement(M.b,{exact:!0,path:"/AddNew",component:tt}),r.a.createElement(M.b,{exact:!0,path:"/Categories",component:da}),r.a.createElement(M.b,{exact:!0,path:"/UpdateProduct",component:ja}),r.a.createElement(M.b,{exact:!0,path:"/Register",component:ya}),r.a.createElement(M.b,{exact:!0,path:"/ForgotPassword",component:Sa}),r.a.createElement(M.b,{exact:!0,path:"/ResetPassword",component:Ca}),r.a.createElement(M.b,{path:"/ResetPassword/:token",component:Ca}))))}a(629);var Pa=Object(be.a)({palette:{type:"dark",primary:{light:"#fff",main:"#fff",dark:"#fff"},secondary:{light:"#ffffff",main:"#ffffff",dark:"#ffffff"},background:{default:"#1D1C24"}}});var Aa=function(e){var t=Object(n.useState)({token:void 0,user:void 0}),a=Object(s.a)(t,2),c=a[0],o=a[1];return Object(n.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),e.next=4,Ce.a.post("http://localhost:5000/users/tokenIsValid",null,{headers:{"x-auth-token":t}});case 4:if(!e.sent.data){e.next=10;break}return e.next=8,Ce.a.get("http://localhost:5000/users/",{headers:{"x-auth-token":t}});case 8:a=e.sent,o({token:t,user:a.data});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement($e.a,null),r.a.createElement("div",null,r.a.createElement(he.a,{theme:Pa},r.a.createElement(V.a,null,r.a.createElement(q.Provider,{value:{userData:c,setUserData:o}},r.a.createElement(Fa,{user:c}))))))},Ra=a(59),$a=a(145),Na=a(131),La=a(87),Ba=Object($a.b)({uri:"http://localhost:4000"}),Ta=new La.a({link:Ba,cache:new Na.a});o.a.render(r.a.createElement(Ra.a,{client:Ta},r.a.createElement(V.a,null,r.a.createElement(Aa,null))),document.getElementById("root"))}},[[455,1,2]]]);
//# sourceMappingURL=main.d54af484.chunk.js.map